<div class="col">
  <div class="card shadow-sm">
    <%= link_to (local_assigns[:detail_view].present? ? media_item.photo : media_item) do %>
      <%= image_tag(
        (local_assigns[:detail_view].present? ? media_item.photo : media_item.photo.representation(resize_to_limit: [512, 512])),
        class: 'media-item-img') %>
    <% end %>
    <div class="card-body">
      <p class="card-text"><i class="bi bi-geo-alt"></i> <%= "#{media_item.waypoint.name}, #{media_item.waypoint.country_name}" %></p>
      <div class="d-flex justify-content-between align-items-center">
        <small class="text-muted"><%= "#{time_ago_in_words(media_item.created_at)} ago" %></small>
        <span class="media-item-reaction-buttons">
          <% if can? :like, media_item %>
            <%= render 'shared/like_button', likeable: media_item %>
          <% end %>
          <% if can? :new_media_item, Comment %>
            <div>
              <%= link_to media_item_new_comment_path(media_item) do %>
                <i class="bi bi-chat-right mx-1"></i>
              <% end %>
              <%= media_item.comments_count %>
            </div>
          <% end %>
        </span>
      </div>
    </div>
  </div>
</div>